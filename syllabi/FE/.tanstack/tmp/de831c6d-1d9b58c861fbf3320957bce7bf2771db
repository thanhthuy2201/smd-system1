import { createFileRoute } from '@tanstack/react-router'
import { createFileRoute } from '@tanstack/router'
import { z } from 'zod'
import { ReviewSchedules } from '@/features/review-schedules'
import { ReviewScheduleStatus } from '@/features/review-schedules/data/schema'

const reviewSchedulesSearchSchema = z.object({
  page: z.number().optional().catch(1),
  pageSize: z.number().optional().catch(10),
  search: z.string().optional().catch(''),
  status: z
    .enum([
      ReviewScheduleStatus.UPCOMING,
      ReviewScheduleStatus.ACTIVE,
      ReviewScheduleStatus.COMPLETED,
      ReviewScheduleStatus.OVERDUE,
      'ALL',
    ])
    .optional()
    .catch('ALL'),
  semesterId: z.string().optional().catch('ALL'),
  academicYear: z.string().optional().catch('ALL'),
})

export const Route = createFileRoute('/_authenticated/review-schedules/')({
  validateSearch: reviewSchedulesSearchSchema,
  component: ReviewSchedules,
})
